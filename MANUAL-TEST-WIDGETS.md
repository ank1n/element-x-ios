# ๐ฑ ะะฝััััะบัะธั ะฟะพ ัััะฝะพะผั ัะตััะธัะพะฒะฐะฝะธั ะฒะบะปะฐะดะบะธ Widgets

## โ ะกัะฐััั ะฟัะพะฒะตัะบะธ
- โ ะัะพะตะบั ััะฟะตัะฝะพ ัะพะฑัะฐะฝ (BUILD SUCCEEDED)
- โ ะัะธะปะพะถะตะฝะธะต ะทะฐะฟััะบะฐะตััั ะฝะฐ ัะธะผัะปััะพัะต
- โ ะะพะด ะฒะบะปะฐะดะบะธ widgets ะดะพะฑะฐะฒะปะตะฝ ะฒ HomeTab enum
- โ widgetsTabFlowCoordinator ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ
- โ widgets tab ะดะพะฑะฐะฒะปะตะฝ ะฒ setTabs()
- โณ ะขัะตะฑัะตััั ัััะฝะฐั ะฟัะพะฒะตัะบะฐ UI

---

## ๐ ะงัะพ ะฟัะพะฒะตัะธัั

### 1. ะัะบัะพะนัะต Xcode ะธ ะทะฐะฟัััะธัะต ะฟัะธะปะพะถะตะฝะธะต
```bash
cd /Users/ankin/Documents/element-x-fork/ios
open ElementX.xcodeproj
```

ะ Xcode:
1. ะัะฑะตัะธัะต ััะตะผั **ElementX**
2. ะัะฑะตัะธัะต ัะธะผัะปััะพั **iPhone 17 Pro** (ะธะปะธ ะปัะฑะพะน iPhone)
3. ะะฐะถะผะธัะต **โR** (Run)

### 2. ะัะพะนะดะธัะต ะฐะฒัะพัะธะทะฐัะธั/AppLock
ะญะบัะฐะฝ AppLock:
- ะะฐะถะผะธัะต **"ะัะพะฟัััะธัั ๐"** ะฒะฝะธะทั ัะบัะฐะฝะฐ

ะะปะธ ะฒะพะนะดะธัะต ะฒ ะฐะบะบะฐัะฝั:
- **Server**: matrix.org (ะธะปะธ ะฒะฐั ัะตัะฒะตั)
- **Username**: ะฒะฐั username
- **Password**: ะฒะฐั ะฟะฐัะพะปั

### 3. ะัะพะฒะตัััะต TabBar ะฒะฝะธะทั ัะบัะฐะฝะฐ

ะะพะปะถะฝั ัะฒะธะดะตัั **4 ะฒะบะปะฐะดะบะธ** (ะฑัะปะพ 3):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                      โ
โ       [ะะกะะะะะะ ะะะะขะะะข]             โ
โ                                      โ
โ                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  [๐ฌ]   [๐]   [๐งฉ]   [๐ค]          โ
โ Chats Spaces Widgets Profile         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะพะฒะฐั ะฒะบะปะฐะดะบะฐ**: [๐งฉ] ะะธะดะถะตัั (extensions icon)
- ะะฐัะฟะพะปะพะถะตะฝะธะต: ะผะตะถะดั Spaces ะธ Profile
- ะะบะพะฝะบะฐ: ัะฐััะธัะตะฝะธั/puzzle piece

### 4. ะัะบัะพะนัะต ะฒะบะปะฐะดะบั Widgets

ะะฐะถะผะธัะต ะฝะฐ ะฒะบะปะฐะดะบั **ะะธะดะถะตัั** (ััะตััั ัะปะตะฒะฐ).

**ะะถะธะดะฐะตะผะพะต ะฟะพะฒะตะดะตะฝะธะต**:
- ะัะบัะพะตััั ัะบัะฐะฝ ัะพ ัะฟะธัะบะพะผ ะบะพะผะฝะฐั
- ะะฐะณะพะปะพะฒะพะบ: "ะะธะดะถะตัั"
- ะกะฟัะฐะฒะฐ: ะธะบะพะฝะบะฐ ะฝะฐัััะพะตะบ โ๏ธ

### 5. ะัะพะฒะตัััะต ัะฟะธัะพะบ ะบะพะผะฝะฐั

ะะพะปะถะฝั ัะฒะธะดะตัั:
- ะกะฟะธัะพะบ ะฒัะตั ะฒะฐัะธั ะบะพะผะฝะฐั (ะบัะพะผะต spaces)
- ะะฐะถะดะฐั ะบะพะผะฝะฐัะฐ ะฟะพะบะฐะทัะฒะฐะตั:
  - ๐ ะะฒะฐัะฐั ะบะพะผะฝะฐัั
  - ะะฐะทะฒะฐะฝะธะต ะบะพะผะฝะฐัั
  - "1 ะฒะธะดะถะตั(ะพะฒ)"
  - ๐ฑ ะะฐะทะฒะฐะฝะธะต ะฒะธะดะถะตัะฐ: "ะกัะฐัะธััะธะบะฐ"

ะัะธะผะตั ััะตะนะบะธ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐] Room Name              [โบ]โ
โ     1 ะฒะธะดะถะตั(ะพะฒ)               โ
โ     ๐ฑ ะกัะฐัะธััะธะบะฐ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 6. ะัะบัะพะนัะต ะฒะธะดะถะตั

ะะฐะถะผะธัะต ะฝะฐ ะปัะฑัั ะบะพะผะฝะฐัั ะธะท ัะฟะธัะบะฐ.

**ะะถะธะดะฐะตะผะพะต ะฟะพะฒะตะดะตะฝะธะต**:
- ะัะบัะพะตััั WebView ั ะฒะธะดะถะตัะพะผ
- ะะฐะณะพะปะพะฒะพะบ: "ะกัะฐัะธััะธะบะฐ"
- ะกะฟัะฐะฒะฐ: ะบะฝะพะฟะบะฐ "ะะฐะบัััั"
- ะ WebView ะทะฐะณััะทะธััั: `https://stats.market.implica.ru/?roomId={room_id}`

### 7. ะัะพะฒะตัััะต WebView

ะ WebView ะดะพะปะถะฝั ัะฒะธะดะตัั:
- โณ Loading spinner ะฟะพะบะฐ ะทะฐะณััะถะฐะตััั
- ๐ ะกััะฐะฝะธัะฐ ััะฐัะธััะธะบะธ (ะตัะปะธ URL ะดะพัััะฟะตะฝ)
- โ ะะปะธ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต (ะตัะปะธ ัะฐะนั ะฝะตะดะพัััะฟะตะฝ)

---

## โ ะัะธัะตัะธะธ ััะฟะตัะฐ

- [ ] ะะบะปะฐะดะบะฐ "ะะธะดะถะตัั" ะฟะพัะฒะธะปะฐัั ะฒ TabBar
- [ ] ะะบะปะฐะดะบะฐ ัะฐัะฟะพะปะพะถะตะฝะฐ ะผะตะถะดั Spaces ะธ Profile
- [ ] ะะบะพะฝะบะฐ extensions (ัะฐััะธัะตะฝะธั) ะพัะพะฑัะฐะถะฐะตััั ะบะพััะตะบัะฝะพ
- [ ] ะกะฟะธัะพะบ ะบะพะผะฝะฐั ั ะฒะธะดะถะตัะฐะผะธ ะทะฐะณััะถะฐะตััั
- [ ] ะะฒะฐัะฐัั ะบะพะผะฝะฐั ะพัะพะฑัะฐะถะฐัััั
- [ ] ะะปะธะบ ะฝะฐ ะบะพะผะฝะฐัั ะพัะบััะฒะฐะตั WebView
- [ ] WebView ะทะฐะณััะถะฐะตั URL ะฒะธะดะถะตัะฐ
- [ ] ะะฝะพะฟะบะฐ "ะะฐะบัััั" ัะฐะฑะพัะฐะตั

---

## ๐ ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั

### ะัะพะฑะปะตะผะฐ 1: ะะบะปะฐะดะบะฐ ะฝะต ะฟะพัะฒะธะปะฐัั
**ะัะธัะธะฝะฐ**: ะคะฐะนะปั ะฝะต ัะบะพะผะฟะธะปะธัะพะฒะฐะฝั ะธะปะธ ะฝะต ะดะพะฑะฐะฒะปะตะฝั ะฒ target
**ะะตัะตะฝะธะต**:
```bash
# ะะตัะตัะพะฑัะฐัั ะฟัะพะตะบั
cd ios
xcodebuild clean -project ElementX.xcodeproj
ruby add_widgets_files.rb  # ะฃะฑะตะดะธัััั ััะพ ัะฐะนะปั ะฒ ะฟัะพะตะบัะต
xcodebuild -project ElementX.xcodeproj -scheme ElementX build
```

### ะัะพะฑะปะตะผะฐ 2: ะัะธะปะพะถะตะฝะธะต ะบัะฐัะธััั
**ะัะธัะธะฝะฐ**: ะัะธะฑะบะฐ ะฒ ะบะพะดะต ะธะปะธ ะพััััััะฒัะตั ะทะฐะฒะธัะธะผะพััั
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ะบะพะฝัะพะปั Xcode ะฝะฐ ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ

### ะัะพะฑะปะตะผะฐ 3: ะัััะพะน ัะฟะธัะพะบ ะบะพะผะฝะฐั
**ะัะธัะธะฝะฐ**: RoomSummaryProvider ะฟัััะพะน (ะฝะตั ะบะพะผะฝะฐั)
**ะะตัะตะฝะธะต**: ะะพะนะดะธัะต ะฒ ะฐะบะบะฐัะฝั ั ะบะพะผะฝะฐัะฐะผะธ

### ะัะพะฑะปะตะผะฐ 4: WebView ะฝะต ะทะฐะณััะถะฐะตััั
**ะัะธัะธะฝะฐ**: URL ะฝะตะดะพัััะฟะตะฝ ะธะปะธ ะฟัะพะฑะปะตะผั ั ัะตััั
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ััะพ URL `https://stats.market.implica.ru` ะดะพัััะฟะตะฝ

---

## ๐ ะกะบัะธะฝัะพัั ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ

ะกะดะตะปะฐะนัะต ัะบัะธะฝัะพัั:
1. TabBar ั ะฒะบะปะฐะดะบะพะน Widgets
2. ะญะบัะฐะฝ ัะฟะธัะบะฐ ะบะพะผะฝะฐั ั ะฒะธะดะถะตัะฐะผะธ
3. WebView ั ะพัะบััััะผ ะฒะธะดะถะตัะพะผ

ะะพะผะฐะฝะดะฐ ะดะปั ัะบัะธะฝัะพัะฐ ัะธะผัะปััะพัะฐ:
```bash
xcrun simctl io booted screenshot ~/Desktop/widgets-tab-screenshot.png
```

---

## โ ะะตะทัะปััะฐั ะฟัะพะฒะตัะบะธ

ะะพัะปะต ะฟัะพะฒะตัะบะธ ะทะฐะฟะพะปะฝะธัะต:

**ะะฐัะฐ**: _______
**ะัะพะฒะตััััะธะน**: _______

ะะตะทัะปััะฐัั:
- [ ] โ ะัั ัะฐะฑะพัะฐะตั ะบะฐะบ ะพะถะธะดะฐะตััั
- [ ] โ๏ธ ะะฐะฑะพัะฐะตั ั ะทะฐะผะตัะฐะฝะธัะผะธ (ะพะฟะธัะฐัั ะฝะธะถะต)
- [ ] โ ะะต ัะฐะฑะพัะฐะตั (ะพะฟะธัะฐัั ะฟัะพะฑะปะตะผั)

**ะะฐะผะตัะฐะฝะธั**:
_______________________________________
_______________________________________

**ะกะบัะธะฝัะพัั**:
- [ ] ะัะธะปะพะถะตะฝั

---

## ๐ ะะพะด ะดะปั ะฟัะพะฒะตัะบะธ

### HomeTab enum (UserSessionFlowCoordinator.swift:23)
```swift
enum HomeTab: Hashable { case chats, spaces, widgets }
```

### Widgets tab initialization (UserSessionFlowCoordinator.swift:95-98)
```swift
let widgetsStackCoordinator = NavigationStackCoordinator()
widgetsTabFlowCoordinator = WidgetsTabFlowCoordinator(
    navigationStackCoordinator: widgetsStackCoordinator,
    flowParameters: flowParameters
)
widgetsTabDetails = .init(tag: HomeTab.widgets,
                          title: "ะะธะดะถะตัั",
                          icon: \.extensions,
                          selectedIcon: \.extensionsSolid)
```

### setTabs (UserSessionFlowCoordinator.swift:107-110)
```swift
navigationTabCoordinator.setTabs([
    .init(coordinator: chatsSplitCoordinator, details: chatsTabDetails),
    .init(coordinator: spacesSplitCoordinator, details: spacesTabDetails),
    .init(coordinator: widgetsStackCoordinator, details: widgetsTabDetails)  // NEW
])
```
