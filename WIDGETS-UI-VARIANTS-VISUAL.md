# Визуализация вариантов UI для виджетов

## Вариант 1: Кнопка в RoomScreen toolbar

### Внешний вид
```
┌─────────────────────────────────────┐
│ [👤] Room Name         [📊] [📞]    │  ← Toolbar
├─────────────────────────────────────┤
│                                     │
│ Alice: Hello!                       │
│ Bob: How are you?                   │
│ Alice: Great!                       │
│                                     │
│                                     │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ Type a message...            [⬆️]   │
└─────────────────────────────────────┘

Клик на [📊] → открывается список виджетов:

┌─────────────────────────────────────┐
│              Widgets                │
│                                [✕]  │
├─────────────────────────────────────┤
│                                     │
│  📊 Statistics Widget               │
│  https://stats.market.implica.ru    │
│                          [Open →]   │
│                                     │
│  📈 Analytics Dashboard             │
│  https://analytics.example.com      │
│                          [Open →]   │
│                                     │
├─────────────────────────────────────┤
│           [Add Widget +]            │
└─────────────────────────────────────┘
```

### Плюсы
- ✅ Не загромождает экран
- ✅ Логичное расположение рядом со звонком
- ✅ Быстрый доступ одним тапом

### Минусы
- ❌ Кнопка видна только в комнате
- ❌ Пользователь может не заметить виджеты
- ❌ Нужно знать что виджеты есть

---

## Вариант 2: Вкладка в RoomDetails

### Навигация
```
RoomScreen
    ↓ (Tap на Room Name)
RoomDetails
    ├─ Members
    ├─ Polls
    ├─ Files & media
    └─ Widgets ← НОВАЯ ВКЛАДКА
```

### Внешний вид
```
Шаг 1: Открываем RoomDetails
┌─────────────────────────────────────┐
│ [←]    Room Details                 │
├─────────────────────────────────────┤
│                                     │
│ 👥 Members                      45  │
│                                [→]  │
│                                     │
│ 📊 Polls                         3  │
│                                [→]  │
│                                     │
│ 📁 Files & media                    │
│                                [→]  │
│                                     │
│ 🎨 Widgets                       2  │  ← НОВОЕ
│                                [→]  │
│                                     │
└─────────────────────────────────────┘

Шаг 2: Клик на Widgets
┌─────────────────────────────────────┐
│ [←]    Widgets                      │
├─────────────────────────────────────┤
│                                     │
│  📊 Statistics Widget               │
│  Created by @admin                  │
│                          [Open →]   │
│                                     │
│  📈 Analytics Dashboard             │
│  Created by @admin                  │
│                          [Open →]   │
│                                     │
└─────────────────────────────────────┘
```

### Плюсы
- ✅ Не загромождает основной экран
- ✅ Логично с другими room features
- ✅ Можно показать детали виджетов

### Минусы
- ❌ Требует 2 клика (Room Header → Widgets)
- ❌ Менее заметно для пользователя
- ❌ Далеко от основного контента

---

## Вариант 3: Вкладка в TabBar

### Внешний вид
```
┌─────────────────────────────────────┐
│                                     │
│        Список виджетов              │
│        из всех комнат               │
│                                     │
│ 📊 Stats (Room Alpha)               │
│ 📈 Analytics (Room Beta)            │
│ 📝 Notes (Room Gamma)               │
│                                     │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ [🏠] [💬] [📊] [👤]                 │  ← TabBar
│  Home Chats Widgets Profile         │
└─────────────────────────────────────┘

Или показать виджеты текущей комнаты:

┌─────────────────────────────────────┐
│            My Widgets               │
├─────────────────────────────────────┤
│                                     │
│ Select a room to see widgets        │
│                                     │
│  💬 Room Alpha          2 widgets   │
│  💬 Room Beta           1 widget    │
│  💬 Room Gamma          3 widgets   │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ [🏠] [💬] [📊] [👤]                 │
└─────────────────────────────────────┘
```

### Плюсы
- ✅ Максимальная видимость
- ✅ Доступ с любого экрана
- ✅ Можно показать виджеты из всех комнат

### Минусы
- ❌ Сильное изменение Element X
- ❌ Занимает место в TabBar
- ❌ Менее контекстуально (виджеты привязаны к комнате)
- ❌ Противоречит философии Element X (минимализм)

---

## Вариант 4: Баннер + кнопка (РЕКОМЕНДУЕМЫЙ)

### Внешний вид при первом открытии комнаты с виджетом
```
┌─────────────────────────────────────┐
│ [👤] Room Name         [📊] [📞]    │  ← Кнопка всегда есть
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 📊 Statistics Widget available  │ │  ← Баннер (скрывается)
│ │                    [View]  [✕]  │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│                                     │
│ Alice: Hello!                       │
│ Bob: How are you?                   │
│ Alice: Check the stats widget!      │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ Type a message...            [⬆️]   │
└─────────────────────────────────────┘
```

### После скрытия баннера
```
┌─────────────────────────────────────┐
│ [👤] Room Name         [📊] [📞]    │  ← Кнопка остается
├─────────────────────────────────────┤
│                                     │
│ Alice: Hello!                       │
│ Bob: How are you?                   │
│ Alice: Check the stats widget!      │
│                                     │
│                                     │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ Type a message...            [⬆️]   │
└─────────────────────────────────────┘
```

### Клик на [View] в баннере или [📊] в toolbar
```
┌─────────────────────────────────────┐
│ [←]         Widgets                 │
├─────────────────────────────────────┤
│                                     │
│  ┌───────────────────────────────┐  │
│  │ 📊 Statistics Widget          │  │
│  │                               │  │
│  │ Monitor room activity and     │  │
│  │ member statistics             │  │
│  │                               │  │
│  │ Created by @admin             │  │
│  │                               │  │
│  │          [Open Widget]        │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │ 📈 Analytics Dashboard        │  │
│  │                               │  │
│  │ View detailed analytics       │  │
│  │                               │  │
│  │          [Open Widget]        │  │
│  └───────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

### Клик на [Open Widget]
```
┌─────────────────────────────────────┐
│ [←]    Statistics Widget       [⋮]  │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │    WebView с виджетом           │ │
│ │                                 │ │
│ │    https://stats.market...      │ │
│ │                                 │ │
│ │    [График активности]          │ │
│ │    [Список участников]          │ │
│ │    [Статистика сообщений]       │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### Плюсы
- ✅ **Видимость**: Баннер привлекает внимание
- ✅ **Постоянный доступ**: Кнопка в toolbar всегда доступна
- ✅ **Не мешает**: Баннер можно скрыть
- ✅ **Знакомый паттерн**: Как pinnedItemsBanner в Element X
- ✅ **Контекстуально**: Виджеты показываются в контексте комнаты
- ✅ **Прогрессивное раскрытие**: Баннер → скрыть → кнопка остается

### Минусы
- ❌ Занимает вертикальное место (но только при первом показе)
- ❌ Чуть сложнее в реализации (баннер + кнопка)

---

## Сравнительная таблица

| Критерий | Вариант 1 | Вариант 2 | Вариант 3 | Вариант 4 |
|----------|-----------|-----------|-----------|-----------|
| **Видимость** | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **Доступность** | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Не мешает** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Контекст** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| **Простота** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| **Соответствие Element X** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| **ИТОГО** | 23/30 | 21/30 | 17/30 | **28/30** |

---

## Анимация взаимодействия (Вариант 4)

### Сценарий 1: Новый пользователь впервые видит виджет
```
1. Открывает комнату
   ┌───────────────────┐
   │ [👤] Room [📊][📞]│
   ├───────────────────┤
   │ 📊 Widget! [View] │  ← Баннер появляется
   ├───────────────────┤
   │   Messages...     │
   └───────────────────┘

2. Нажимает [View]
   → Открывается список виджетов

3. Нажимает [Open Widget]
   → Открывается WebView с виджетом

4. Возвращается в комнату
   ┌───────────────────┐
   │ [👤] Room [📊][📞]│  ← Баннер больше не показывается
   ├───────────────────┤
   │   Messages...     │
   └───────────────────┘
```

### Сценарий 2: Опытный пользователь хочет открыть виджет
```
1. Открывает комнату
   ┌───────────────────┐
   │ [👤] Room [📊][📞]│  ← Баннера нет (уже скрыт)
   ├───────────────────┤
   │   Messages...     │
   └───────────────────┘

2. Нажимает [📊]
   → Сразу список виджетов

3. Нажимает на нужный виджет
   → WebView
```

### Сценарий 3: В комнате нет виджетов
```
┌───────────────────┐
│ [👤] Room    [📞] │  ← Кнопка [📊] НЕ показывается
├───────────────────┤
│   Messages...     │
└───────────────────┘
```

---

## Рекомендация

**Вариант 4** оптимален потому что:

1. **Прогрессивное раскрытие (Progressive Disclosure)**
   - Новичок видит баннер и понимает что есть виджеты
   - Опытный пользователь использует кнопку

2. **Минимальное влияние на UX**
   - Баннер появляется только один раз
   - После скрытия не мешает

3. **Соответствие Element X паттернам**
   - Баннеры уже есть (pinnedItems, knockRequests)
   - Кнопки в toolbar - стандартное место

4. **Гибкость**
   - Можно легко добавить уведомления о новых виджетах
   - Можно показывать разные баннеры для разных виджетов

---

## Следующий шаг

Какой вариант выбираем для реализации?
