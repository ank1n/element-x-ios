# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ —Å –≤–∫–ª–∞–¥–∫–æ–π Widgets

## –ü—Ä–æ–±–ª–µ–º–∞
–í–∫–ª–∞–¥–∫–∞ Widgets –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ TabBar, —Ö–æ—Ç—è –∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω.

**–ü—Ä–∏—á–∏–Ω–∞**: Xcode –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ**: Clean Build Folder + –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞.

---

## üìù –®–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –í Xcode (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ): –Ω–∞–∂–º–∏—Ç–µ ‚èπÔ∏è –∏–ª–∏ `‚åò.`

2. **Clean Build Folder**:
   - –ú–µ–Ω—é: `Product ‚Üí Clean Build Folder`
   - –ò–ª–∏ –≥–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞: `‚áß‚åòK` (Shift + Command + K)
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)

3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**:
   - –ú–µ–Ω—é: `Product ‚Üí Build`
   - –ò–ª–∏ –≥–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞: `‚åòB` (Command + B)
   - –î–æ–∂–¥–∏—Ç–µ—Å—å "Build Succeeded"

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   - –ú–µ–Ω—é: `Product ‚Üí Run`
   - –ò–ª–∏ –≥–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞: `‚åòR` (Command + R)

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ TabBar**:
   - –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –Ω–∏–∂–Ω—é—é —á–∞—Å—Ç—å —ç–∫—Ä–∞–Ω–∞
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å **4 –≤–∫–ª–∞–¥–∫–∏**: Chats, Spaces, **Widgets**, Profile

---

## üéØ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è

### TabBar —Å 4 –≤–∫–ª–∞–¥–∫–∞–º–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                      ‚îÇ
‚îÇ         [–ö–û–ù–¢–ï–ù–¢ –≠–ö–†–ê–ù–ê]             ‚îÇ
‚îÇ                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [üí¨]   [üè†]   [üß©]   [üë§]          ‚îÇ
‚îÇ Chats Spaces Widgets Profile         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ - WIDGETS** (üß©):
- **–ü–æ–∑–∏—Ü–∏—è**: –¢—Ä–µ—Ç—å—è —Å–ª–µ–≤–∞
- **–ò–∫–æ–Ω–∫–∞**: Extensions (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è/puzzle)
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: –í–∏–¥–∂–µ—Ç—ã

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### 1. –§–∞–π–ª UserSessionFlowCoordinator.swift

–û—Ç–∫—Ä–æ–π—Ç–µ: `ElementX/Sources/FlowCoordinators/UserSessionFlowCoordinator.swift`

**–°—Ç—Ä–æ–∫–∞ 23** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `widgets` –≤ enum:
```swift
enum HomeTab: Hashable { case chats, spaces, widgets }
```

**–°—Ç—Ä–æ–∫–∏ 107-110** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å widgetsTab:
```swift
navigationTabCoordinator.setTabs([
    .init(coordinator: chatsSplitCoordinator, details: chatsTabDetails),
    .init(coordinator: spacesSplitCoordinator, details: spacesTabDetails),
    .init(coordinator: widgetsStackCoordinator, details: widgetsTabDetails)  // ‚Üê –≠–¢–ê –°–¢–†–û–ö–ê
])
```

### 2. –í—Å–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ

–í Project Navigator —Å–ª–µ–≤–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –µ—Å—Ç—å:
- ‚úÖ `FlowCoordinators/WidgetsTabFlowCoordinator.swift`
- ‚úÖ `Screens/WidgetsListScreen/` (4 —Ñ–∞–π–ª–∞)
- ‚úÖ `Screens/WidgetWebViewScreen/` (4 —Ñ–∞–π–ª–∞)

### 3. Target Membership

–í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∏–∑ —Ñ–∞–π–ª–æ–≤ –≤–∏–¥–∂–µ—Ç–æ–≤, –æ—Ç–∫—Ä–æ–π—Ç–µ File Inspector (‚å•‚åò1):
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞ —É `ElementX` target

---

## üõ†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª)

–ï—Å–ª–∏ —á–µ—Ä–µ–∑ Xcode –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:

```bash
cd /Users/ankin/Documents/element-x-fork/ios

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä
killall Simulator

# 2. –£–¥–∞–ª–∏—Ç—å DerivedData
rm -rf ~/Library/Developer/Xcode/DerivedData/ElementX-*

# 3. –û—á–∏—Å—Ç–∏—Ç—å SPM –∫–µ—à
rm -rf ~/Library/Caches/org.swift.swiftpm

# 4. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Xcode
open ElementX.xcodeproj

# –î–∞–ª–µ–µ –≤ Xcode:
# - Clean Build Folder (‚áß‚åòK)
# - Build (‚åòB)
# - Run (‚åòR)
```

---

## ‚ùì –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–º–º–∏—Ç—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:

```bash
cd /Users/ankin/Documents/element-x-fork/ios
git log --oneline --decorate -5
```

–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –∫–æ–º–º–∏—Ç—ã:
```
68a68b4 (HEAD -> develop) feat: Add Widgets tab screens and coordinators
21dd96e feat: Add Widgets tab flow coordinator
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

```bash
git diff HEAD~2 ElementX/Sources/FlowCoordinators/UserSessionFlowCoordinator.swift
```

–î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:
- `case widgets` –≤ enum
- `widgetsTabFlowCoordinator` properties
- widgets –≤ setTabs

---

## üì∏ –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç TabBar:

**–í Xcode**: `‚åò‚áß5` ‚Üí –≤—ã–¥–µ–ª–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ

–ò–ª–∏ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:
```bash
xcrun simctl io booted screenshot ~/Desktop/widgets-tab-working.png
```

---

## ‚úÖ –£—Å–ø–µ—Ö!

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É Widgets:
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë
2. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é –∫–æ–º–Ω–∞—Ç—É
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è WebView —Å –≤–∏–¥–∂–µ—Ç–æ–º

**–ì–æ—Ç–æ–≤–æ!** üéâ
